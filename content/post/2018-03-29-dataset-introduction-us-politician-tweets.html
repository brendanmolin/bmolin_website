---
title: 'Dataset Introduction: US Politician Tweets'
author: Brendan Molin
date: '2018-03-29'
slug: dataset-introduction-us-politician-tweets
categories:
  - Data Science
tags:
  - R
  - Natural Language Processing
  - Exploratory
  - twitter
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/plotly-binding/plotly.js"></script>
<script src="/rmarkdown-libs/typedarray/typedarray.min.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/crosstalk/js/crosstalk.min.js"></script>
<link href="/rmarkdown-libs/plotlyjs/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="/rmarkdown-libs/plotlyjs/plotly-latest.min.js"></script>


<p>The data set we will be discussing today is a targeted extract of tweets from United States politicians since 2017. The data contains:</p>
<ol style="list-style-type: decimal">
<li>usernames</li>
<li>date/time</li>
<li>retweets</li>
<li>favorites</li>
<li>text</li>
<li>geography</li>
<li>mentions</li>
<li>hashtags</li>
<li>id</li>
<li>permalink</li>
</ol>
<p>The data is curated by myself in uneven intervals up to 2018-03-18, at which point I began scraping daily on a one-day lag (while possible to stream tweets in real-time, twitter terms of service requires developers to respect deleted tweets; I attempt to do this by giving users enough time to delete tweets, which anecdotally seems to happen within hours). If I lengthen the lag, I will update the documentation.</p>
<p>The data can be obtained by following the Google Drive link in <a href="the%20Github%20repo">https://github.com/brendanmolin/get-politician-tweets</a>. I highly recommend you read the documentation before downloading and using the data; I guarantee you will misuse the data and make a mistake in your analysis if you do not carefully read the documentation.</p>
<pre class="r"><code>library(data.table)
library(tidyverse)
library(tidytext)
library(lubridate)
library(sentimentr)
library(wordcloud)
library(ggplot2)
library(plotly)
library(scales)
library(RColorBrewer)</code></pre>
<pre class="r"><code>twitter_history &lt;- fread(&quot;data/tweet_history.txt&quot;, stringsAsFactors = FALSE)</code></pre>
<pre><code>## 
Read 3.5% of 569874 rows
Read 10.5% of 569874 rows
Read 21.1% of 569874 rows
Read 36.9% of 569874 rows
Read 49.1% of 569874 rows
Read 70.2% of 569874 rows
Read 91.2% of 569874 rows
Read 96.5% of 569874 rows
Read 569874 rows and 10 (of 10) columns from 0.164 GB file in 00:00:16</code></pre>
<div id="data-cleaning" class="section level3">
<h3>Data Cleaning</h3>
<p>Let’s take a quick look at the data to see what we’ve collected and start cleaning data. The date field is imported as a character, though it contains the date, hour, and minute of the tweet. Additionally, empty mentions and hashtags are not treated as missing but as empty strings.</p>
<pre class="r"><code>glimpse(twitter_history)</code></pre>
<pre><code>## Observations: 569,874
## Variables: 10
## $ username  &lt;chr&gt; &quot;AkGovBillWalker&quot;, &quot;AkGovBillWalker&quot;, &quot;AkGovBillWalk...
## $ date      &lt;chr&gt; &quot;2017-10-10 19:50&quot;, &quot;2017-10-10 18:56&quot;, &quot;2017-10-10 ...
## $ retweets  &lt;int&gt; 0, 0, 2, 39, 6, 6, 2, 8, 3, 8, 4, 5, 0, 6, 6, 9, 4, ...
## $ favorites &lt;int&gt; 7, 11, 6, 77, 5, 25, 2, 23, 11, 22, 3, 10, 5, 14, 21...
## $ text      &lt;chr&gt; &quot;Thank you to The Last Frontier Honor Flight and eve...
## $ geo       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ...
## $ mentions  &lt;chr&gt; &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;@LtGovMallott&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;,...
## $ hashtags  &lt;chr&gt; &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;#IndigenousPeoplesDay&quot;, &quot;#IndigenousPeo...
## $ id        &lt;chr&gt; &quot;917900087975485440&quot;, &quot;917886490847322118&quot;, &quot;9178698...
## $ permalink &lt;chr&gt; &quot;https://twitter.com/AkGovBillWalker/status/91790008...</code></pre>
<p>We can clean these columns up easily by converting the date column to a POSIT class and change all the empty strings to NAs. In the following analysis, I’m more concerned with Dates than times, so I’m going to add on an extra transformation to ‘date’ to turn it into the date class, dropping the time. This will allow me to summarise by day.</p>
<pre class="r"><code>twitter_history &lt;- twitter_history %&gt;%
  mutate(date = as.POSIXct(date),
         mentions = ifelse(mentions == &quot;&quot;, NA, mentions),
         hashtags = ifelse(hashtags == &quot;&quot;, NA, hashtags),
         date = as.Date(date))</code></pre>
<p>Let’s check for any missing data in columns we expect not to see any, and see how filled geo, mentions, and hashtags are. Nothing appears out of order for our key variables. Geo is completely empty, and mentions/hashtags are filled under half of the time.</p>
<pre class="r"><code>colSums(is.na(twitter_history))</code></pre>
<pre><code>##  username      date  retweets favorites      text       geo  mentions 
##         0         0         0         0         0    569874    365826 
##  hashtags        id permalink 
##    301404         0         0</code></pre>
</div>
<div id="tweets-volume-and-sentiment-over-time" class="section level3">
<h3>Tweets Volume and Sentiment over Time</h3>
<p>Total tweet volume peaked during the President’s joint address to Congress on February 28th, 2017. The next peak was May 4th, 2017, when the Republican-lead House of Representatives passed an Affordable Care Act repeal bill and celebrated on the Rose Garden. In fact, most of the weekly peaks were dominated by healthcare terms (health, healthcare, trumpcare). We create this chart in plotly, with the top word of the day viewable on hover.</p>
<pre class="r"><code>create_tidy_text &lt;- function(twitter_history) {
  data(stop_words)
  custom_stop &lt;- data.frame(word = c(&quot;http&quot;,
                                     &quot;https&quot;,
                                     &quot;httpwww&quot;,
                                     &quot;httpswww&quot;,
                                     &quot;pic.twitter.com&quot;),
                            lexicon = &quot;custom_twitter&quot;,
                            stringsAsFactors = FALSE)
  stop_words &lt;- rbind(stop_words, custom_stop)
  
  twitter_text &lt;- twitter_history %&gt;%
    mutate(text = gsub(&quot;[^A-Za-z0-9 ]&quot;,&quot;&quot;,text)) %&gt;%
    unnest_tokens(word, text) %&gt;%
    anti_join(stop_words)
  
  return(twitter_text)
}

top_ngram_of_day &lt;- function(tidytext) {
  toptext &lt;- tidytext %&gt;%
    group_by(date) %&gt;%
    count(word, sort = TRUE) %&gt;%
    arrange(date, -n) %&gt;%
    group_by(date) %&gt;%
    mutate(rank=row_number()) %&gt;%
    filter(rank == 1)
  
  return(toptext)
}

plot_tweet_volume_over_time &lt;- function(twitter_history) {
  toptext_1 &lt;- create_tidy_text(twitter_history)
  toptext_1 &lt;- top_ngram_of_day(toptext_1)
  
  twitter_history &lt;- twitter_history %&gt;%
    group_by(date) %&gt;%
    summarise(tweets = n()) %&gt;%
    left_join(toptext_1, by = c(&quot;date&quot; = &quot;date&quot;))
  
  return(twitter_history)
}

tweet_time &lt;- plot_tweet_volume_over_time(twitter_history)
plot_ly(data = tweet_time,
        x = ~date,
        y = ~tweets,
        text = ~paste0(&quot;Top Word of Day: &quot;, word, &quot; (n=&quot;, n, &quot;)&quot;),
        type = &#39;scatter&#39;,
        mode = &#39;lines&#39;)</code></pre>
<div id="78ec2f01cee" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="78ec2f01cee">{"x":{"visdat":{"78ec49321cd7":["function () ","plotlyVisDat"]},"cur_data":"78ec49321cd7","attrs":{"78ec49321cd7":{"x":{},"y":{},"text":{},"mode":"lines","alpha":1,"sizes":[10,100],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"date"},"yaxis":{"domain":[0,1],"title":"tweets"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":["2017-01-01","2017-01-02","2017-01-03","2017-01-04","2017-01-05","2017-01-06","2017-01-07","2017-01-08","2017-01-09","2017-01-10","2017-01-11","2017-01-12","2017-01-13","2017-01-14","2017-01-15","2017-01-16","2017-01-17","2017-01-18","2017-01-19","2017-01-20","2017-01-21","2017-01-22","2017-01-23","2017-01-24","2017-01-25","2017-01-26","2017-01-27","2017-01-28","2017-01-29","2017-01-30","2017-01-31","2017-02-01","2017-02-02","2017-02-03","2017-02-04","2017-02-05","2017-02-06","2017-02-07","2017-02-08","2017-02-09","2017-02-10","2017-02-11","2017-02-12","2017-02-13","2017-02-14","2017-02-15","2017-02-16","2017-02-17","2017-02-18","2017-02-19","2017-02-20","2017-02-21","2017-02-22","2017-02-23","2017-02-24","2017-02-25","2017-02-26","2017-02-27","2017-02-28","2017-03-01","2017-03-02","2017-03-03","2017-03-04","2017-03-05","2017-03-06","2017-03-07","2017-03-08","2017-03-09","2017-03-10","2017-03-11","2017-03-12","2017-03-13","2017-03-14","2017-03-15","2017-03-16","2017-03-17","2017-03-18","2017-03-19","2017-03-20","2017-03-21","2017-03-22","2017-03-23","2017-03-24","2017-03-25","2017-03-26","2017-03-27","2017-03-28","2017-03-29","2017-03-30","2017-03-31","2017-04-01","2017-04-02","2017-04-03","2017-04-04","2017-04-05","2017-04-06","2017-04-07","2017-04-08","2017-04-09","2017-04-10","2017-04-11","2017-04-12","2017-04-13","2017-04-14","2017-04-15","2017-04-16","2017-04-17","2017-04-18","2017-04-19","2017-04-20","2017-04-21","2017-04-22","2017-04-23","2017-04-24","2017-04-25","2017-04-26","2017-04-27","2017-04-28","2017-04-29","2017-04-30","2017-05-01","2017-05-02","2017-05-03","2017-05-04","2017-05-05","2017-05-06","2017-05-07","2017-05-08","2017-05-09","2017-05-10","2017-05-11","2017-05-12","2017-05-13","2017-05-14","2017-05-15","2017-05-16","2017-05-17","2017-05-18","2017-05-19","2017-05-20","2017-05-21","2017-05-22","2017-05-23","2017-05-24","2017-05-25","2017-05-26","2017-05-27","2017-05-28","2017-05-29","2017-05-30","2017-05-31","2017-06-01","2017-06-02","2017-06-03","2017-06-04","2017-06-05","2017-06-06","2017-06-07","2017-06-08","2017-06-09","2017-06-10","2017-06-11","2017-06-12","2017-06-13","2017-06-14","2017-06-15","2017-06-16","2017-06-17","2017-06-18","2017-06-19","2017-06-20","2017-06-21","2017-06-22","2017-06-23","2017-06-24","2017-06-25","2017-06-26","2017-06-27","2017-06-28","2017-06-29","2017-06-30","2017-07-01","2017-07-02","2017-07-03","2017-07-04","2017-07-05","2017-07-06","2017-07-07","2017-07-08","2017-07-09","2017-07-10","2017-07-11","2017-07-12","2017-07-13","2017-07-14","2017-07-15","2017-07-16","2017-07-17","2017-07-18","2017-07-19","2017-07-20","2017-07-21","2017-07-22","2017-07-23","2017-07-24","2017-07-25","2017-07-26","2017-07-27","2017-07-28","2017-07-29","2017-07-30","2017-07-31","2017-08-01","2017-08-02","2017-08-03","2017-08-04","2017-08-05","2017-08-06","2017-08-07","2017-08-08","2017-08-09","2017-08-10","2017-08-11","2017-08-12","2017-08-13","2017-08-14","2017-08-15","2017-08-16","2017-08-17","2017-08-18","2017-08-19","2017-08-20","2017-08-21","2017-08-22","2017-08-23","2017-08-24","2017-08-25","2017-08-26","2017-08-27","2017-08-28","2017-08-29","2017-08-30","2017-08-31","2017-09-01","2017-09-02","2017-09-03","2017-09-04","2017-09-05","2017-09-06","2017-09-07","2017-09-08","2017-09-09","2017-09-10","2017-09-11","2017-09-12","2017-09-13","2017-09-14","2017-09-15","2017-09-16","2017-09-17","2017-09-18","2017-09-19","2017-09-20","2017-09-21","2017-09-22","2017-09-23","2017-09-24","2017-09-25","2017-09-26","2017-09-27","2017-09-28","2017-09-29","2017-09-30","2017-10-01","2017-10-02","2017-10-03","2017-10-04","2017-10-05","2017-10-06","2017-10-07","2017-10-08","2017-10-09","2017-10-10","2017-10-11","2017-10-12","2017-10-13","2017-10-14","2017-10-15","2017-10-16","2017-10-17","2017-10-18","2017-10-19","2017-10-20","2017-10-21","2017-10-22","2017-10-23","2017-10-24","2017-10-25","2017-10-26","2017-10-27","2017-10-28","2017-10-29","2017-10-30","2017-10-31","2017-11-01","2017-11-02","2017-11-03","2017-11-04","2017-11-05","2017-11-06","2017-11-07","2017-11-08","2017-11-09","2017-11-10","2017-11-11","2017-11-12","2017-11-13","2017-11-14","2017-11-15","2017-11-16","2017-11-17","2017-11-18","2017-11-19","2017-11-20","2017-11-21","2017-11-22","2017-11-23","2017-11-24","2017-11-25","2017-11-26","2017-11-27","2017-11-28","2017-11-29","2017-11-30","2017-12-01","2017-12-02","2017-12-03","2017-12-04","2017-12-05","2017-12-06","2017-12-07","2017-12-08","2017-12-09","2017-12-10","2017-12-11","2017-12-12","2017-12-13","2017-12-14","2017-12-15","2017-12-16","2017-12-17","2017-12-18","2017-12-19","2017-12-20","2017-12-21","2017-12-22","2017-12-23","2017-12-24","2017-12-25","2017-12-26","2017-12-27","2017-12-28","2017-12-29","2017-12-30","2017-12-31","2018-01-01","2018-01-02","2018-01-03","2018-01-04","2018-01-05","2018-01-06","2018-01-07","2018-01-08","2018-01-09","2018-01-10","2018-01-11","2018-01-12","2018-01-13","2018-01-14","2018-01-15","2018-01-16","2018-01-17","2018-01-18","2018-01-19","2018-01-20","2018-01-21","2018-01-22","2018-01-23","2018-01-24","2018-01-25","2018-01-26","2018-01-27","2018-01-28","2018-01-29","2018-01-30","2018-01-31","2018-02-01","2018-02-02","2018-02-03","2018-02-04","2018-02-05","2018-02-06","2018-02-07","2018-02-08","2018-02-09","2018-02-10","2018-02-11","2018-02-12","2018-02-13","2018-02-14","2018-02-15","2018-02-16","2018-02-17","2018-02-18","2018-02-19","2018-02-20","2018-02-21","2018-02-22","2018-02-23","2018-02-24","2018-02-25","2018-02-26","2018-02-27","2018-02-28","2018-03-01","2018-03-02","2018-03-03","2018-03-04","2018-03-05","2018-03-06","2018-03-07","2018-03-08","2018-03-09","2018-03-10","2018-03-11","2018-03-12","2018-03-13","2018-03-14","2018-03-15","2018-03-16","2018-03-17","2018-03-18"],"y":[380,285,1471,1518,1708,1487,522,402,1531,1951,2040,1843,1564,623,531,903,1263,1768,1408,1426,770,411,1505,1919,1580,1591,1543,801,916,1640,2008,2246,1704,1476,590,457,1315,2109,1733,1753,1386,538,444,1208,2079,1937,1974,1420,571,338,647,1230,1335,1496,1425,664,409,1156,2196,3601,2058,1436,609,392,1361,1917,2586,2229,1458,581,476,1642,1606,1827,2489,1546,554,412,1389,2052,2365,2330,2282,577,400,1259,2258,2198,1820,1428,564,381,1356,2182,2244,1673,1631,476,367,1293,1273,1320,1342,1081,401,511,999,1540,1451,1350,1406,841,361,1427,1716,2143,2254,1620,762,434,1627,2202,2199,3200,1405,526,425,1178,1614,1642,1406,1253,458,537,1278,1798,2320,1913,1319,700,410,1282,2201,2419,1763,1113,524,366,899,911,1433,1755,1385,454,443,1193,1670,1849,2157,1202,498,448,1462,2033,1780,1927,1462,548,614,1415,2017,1964,2263,1518,480,412,1812,2237,1883,2092,1359,474,324,538,817,1006,1440,1202,459,392,1287,1834,2232,2164,1764,601,494,1349,2196,2232,2049,1300,524,330,1357,2327,2346,2316,2001,449,329,1095,1428,1553,1477,1318,465,377,1083,1213,1150,1160,955,804,598,1203,1676,1395,1482,1267,480,316,1259,1527,1384,1399,1173,942,468,1267,1232,1349,1601,1044,426,432,785,1704,1942,1871,1711,714,575,1783,1699,2012,1719,1711,519,448,1534,1856,2012,1649,1507,536,480,1764,2118,2120,2078,1579,664,425,1622,2088,2128,1960,1910,579,471,725,2000,3183,1894,1771,435,341,1180,1488,1502,1452,1249,460,353,1177,1776,2153,1982,1286,505,317,1295,1934,1966,2272,1410,546,591,1557,1860,1941,1626,1124,1018,396,1211,1872,1910,2269,1242,477,310,1078,1292,803,679,392,451,260,1009,1452,1831,1698,1691,951,368,1286,1678,1802,1757,1163,462,348,1201,2053,2211,1768,1358,505,301,1322,2226,1871,1508,1018,437,330,492,369,389,467,488,340,354,479,781,1148,1338,1051,425,307,1311,1996,1811,1823,1507,603,446,965,1452,1698,1860,2285,2098,846,1500,1394,1730,1455,1457,623,322,1294,2081,4063,1486,1646,555,454,1292,1898,1849,1461,1571,546,334,1376,1637,2064,1684,1303,534,351,601,1023,1376,1579,1180,537,379,1209,2096,1705,1714,1183,481,376,1311,1840,1996,1990,1431,476,427,1480,1761,2184,1822,1379,519,376],"text":["Top Word of Day: happy (n=174)","Top Word of Day: congress (n=28)","Top Word of Day: congress (n=349)","Top Word of Day: aca (n=171)","Top Word of Day: aca (n=244)","Top Word of Day: congress (n=104)","Top Word of Day: aca (n=34)","Top Word of Day: aca (n=18)","Top Word of Day: law (n=153)","Top Word of Day: sessions (n=143)","Top Word of Day: sessions (n=85)","Top Word of Day: aca (n=120)","Top Word of Day: aca (n=204)","Top Word of Day: repjohnlewis (n=74)","Top Word of Day: aca (n=91)","Top Word of Day: mlkday (n=276)","Top Word of Day: aca (n=79)","Top Word of Day: epa (n=111)","Top Word of Day: inauguration (n=165)","Top Word of Day: inauguration (n=327)","Top Word of Day: womensmarch (n=244)","Top Word of Day: womensmarch (n=44)","Top Word of Day: potus (n=126)","Top Word of Day: potus (n=126)","Top Word of Day: potus (n=121)","Top Word of Day: potus (n=112)","Top Word of Day: marchforlife (n=195)","Top Word of Day: refugees (n=74)","Top Word of Day: muslimban (n=97)","Top Word of Day: muslimban (n=212)","Top Word of Day: muslimban (n=129)","Top Word of Day: gorsuch (n=341)","Top Word of Day: potus (n=78)","Top Word of Day: potus (n=116)","Top Word of Day: judge (n=47)","Top Word of Day: superbowl (n=32)","Top Word of Day: devos (n=89)","Top Word of Day: devos (n=207)","Top Word of Day: sessions (n=119)","Top Word of Day: trump (n=72)","Top Word of Day: potus (n=65)","Top Word of Day: time (n=21)","Top Word of Day: president (n=22)","Top Word of Day: trump (n=50)","Top Word of Day: day (n=122)","Top Word of Day: trump (n=109)","Top Word of Day: epa (n=96)","Top Word of Day: epa (n=134)","Top Word of Day: protectourcare (n=61)","Top Word of Day: trump (n=18)","Top Word of Day: presidentsday (n=98)","Top Word of Day: protectourcare (n=73)","Top Word of Day: hall (n=62)","Top Word of Day: students (n=124)","Top Word of Day: trump (n=70)","Top Word of Day: town (n=37)","Top Word of Day: health (n=20)","Top Word of Day: potus (n=72)","Top Word of Day: potus (n=214)","Top Word of Day: jointaddress (n=727)","Top Word of Day: sessions (n=421)","Top Word of Day: students (n=66)","Top Word of Day: town (n=37)","Top Word of Day: trump (n=21)","Top Word of Day: ban (n=95)","Top Word of Day: care (n=223)","Top Word of Day: women (n=376)","Top Word of Day: bill (n=241)","Top Word of Day: bill (n=138)","Top Word of Day: obamacare (n=27)","Top Word of Day: health (n=37)","Top Word of Day: health (n=222)","Top Word of Day: trumpcare (n=151)","Top Word of Day: health (n=132)","Top Word of Day: budget (n=391)","Top Word of Day: budget (n=135)","Top Word of Day: vpinfl (n=32)","Top Word of Day: health (n=31)","Top Word of Day: fbi (n=107)","Top Word of Day: bill (n=181)","Top Word of Day: trumpcare (n=375)","Top Word of Day: trumpcare (n=574)","Top Word of Day: trumpcare (n=588)","Top Word of Day: care (n=36)","Top Word of Day: proud (n=20)","Top Word of Day: bill (n=57)","Top Word of Day: potus (n=154)","Top Word of Day: day (n=104)","Top Word of Day: health (n=152)","Top Word of Day: trump (n=52)","Top Word of Day: day (n=26)","Top Word of Day: hatch (n=19)","Top Word of Day: gorsuch (n=70)","Top Word of Day: equalpayday (n=442)","Top Word of Day: gorsuch (n=128)","Top Word of Day: gorsuch (n=99)","Top Word of Day: syria (n=318)","Top Word of Day: syria (n=37)","Top Word of Day: egypt (n=32)","Top Word of Day: passover (n=103)","Top Word of Day: passover (n=50)","Top Word of Day: students (n=60)","Top Word of Day: health (n=62)","Top Word of Day: chibokgirls (n=129)","Top Word of Day: tax (n=31)","Top Word of Day: easter (n=268)","Top Word of Day: week (n=64)","Top Word of Day: tax (n=142)","Top Word of Day: care (n=64)","Top Word of Day: health (n=56)","Top Word of Day: im (n=56)","Top Word of Day: earthday (n=263)","Top Word of Day: earthday (n=18)","Top Word of Day: holocaust (n=110)","Top Word of Day: potus (n=85)","Top Word of Day: tax (n=152)","Top Word of Day: trump100days (n=166)","Top Word of Day: trump100days (n=92)","Top Word of Day: climatemarch (n=90)","Top Word of Day: roslehtinen (n=22)","Top Word of Day: smallbusinessweek (n=137)","Top Word of Day: bill (n=137)","Top Word of Day: bill (n=240)","Top Word of Day: trumpcare (n=851)","Top Word of Day: health (n=123)","Top Word of Day: health (n=46)","Top Word of Day: people (n=29)","Top Word of Day: health (n=63)","Top Word of Day: teachers (n=108)","Top Word of Day: comey (n=236)","Top Word of Day: trump (n=75)","Top Word of Day: trump (n=50)","Top Word of Day: week (n=24)","Top Word of Day: happy (n=239)","Top Word of Day: officers (n=116)","Top Word of Day: trump (n=136)","Top Word of Day: investigation (n=144)","Top Word of Day: special (n=92)","Top Word of Day: trump (n=68)","Top Word of Day: armedforcesday (n=112)","Top Word of Day: trump (n=30)","Top Word of Day: fosteryouthvoices (n=72)","Top Word of Day: budget (n=382)","Top Word of Day: health (n=224)","Top Word of Day: bill (n=134)","Top Word of Day: ramadan (n=65)","Top Word of Day: veterans (n=38)","Top Word of Day: memorialday (n=30)","Top Word of Day: memorialday (n=428)","Top Word of Day: veterans (n=44)","Top Word of Day: parisagreement (n=159)","Top Word of Day: parisagreement (n=249)","Top Word of Day: gun (n=107)","Top Word of Day: week (n=19)","Top Word of Day: london (n=98)","Top Word of Day: week (n=47)","Top Word of Day: dday (n=236)","Top Word of Day: bill (n=79)","Top Word of Day: comey (n=198)","Top Word of Day: trump (n=66)","Top Word of Day: day (n=23)","Top Word of Day: trump (n=19)","Top Word of Day: ago (n=133)","Top Word of Day: bill (n=184)","Top Word of Day: stevescalise (n=321)","Top Word of Day: daca (n=102)","Top Word of Day: congressionalbaseballgame (n=89)","Top Word of Day: day (n=36)","Top Word of Day: happy (n=214)","Top Word of Day: bill (n=87)","Top Word of Day: bill (n=168)","Top Word of Day: bill (n=163)","Top Word of Day: bill (n=414)","Top Word of Day: bill (n=192)","Top Word of Day: bill (n=44)","Top Word of Day: care (n=39)","Top Word of Day: trumpcare (n=309)","Top Word of Day: trumpcare (n=334)","Top Word of Day: care (n=165)","Top Word of Day: bill (n=151)","Top Word of Day: bill (n=73)","Top Word of Day: people (n=22)","Top Word of Day: health (n=19)","Top Word of Day: july (n=36)","Top Word of Day: happy (n=390)","Top Word of Day: trumpcare (n=60)","Top Word of Day: care (n=104)","Top Word of Day: care (n=85)","Top Word of Day: potus (n=21)","Top Word of Day: putin (n=23)","Top Word of Day: care (n=65)","Top Word of Day: families (n=129)","Top Word of Day: netneutrality (n=291)","Top Word of Day: bill (n=229)","Top Word of Day: bill (n=164)","Top Word of Day: bill (n=47)","Top Word of Day: care (n=33)","Top Word of Day: bill (n=127)","Top Word of Day: health (n=245)","Top Word of Day: bill (n=151)","Top Word of Day: senjohnmccain (n=258)","Top Word of Day: trump (n=65)","Top Word of Day: health (n=25)","Top Word of Day: care (n=20)","Top Word of Day: abetterdeal (n=132)","Top Word of Day: care (n=288)","Top Word of Day: care (n=191)","Top Word of Day: bill (n=248)","Top Word of Day: care (n=302)","Top Word of Day: bill (n=25)","Top Word of Day: medicare (n=21)","Top Word of Day: women (n=79)","Top Word of Day: startupday (n=121)","Top Word of Day: bill (n=105)","Top Word of Day: act (n=78)","Top Word of Day: happy (n=142)","Top Word of Day: backtoourroots (n=22)","Top Word of Day: backtoourroots (n=21)","Top Word of Day: purpleheartday (n=129)","Top Word of Day: climate (n=51)","Top Word of Day: north (n=47)","Top Word of Day: parkchat (n=46)","Top Word of Day: potus (n=42)","Top Word of Day: charlottesville (n=267)","Top Word of Day: charlottesville (n=147)","Top Word of Day: socsec82 (n=148)","Top Word of Day: dreamers (n=144)","Top Word of Day: white (n=95)","Top Word of Day: barcelona (n=231)","Top Word of Day: white (n=115)","Top Word of Day: day (n=28)","Top Word of Day: family (n=14)","Top Word of Day: eclipse (n=146)","Top Word of Day: afghanistan (n=191)","Top Word of Day: rootoutracism (n=81)","Top Word of Day: trump (n=51)","Top Word of Day: hurricaneharvey (n=68)","Top Word of Day: womensequalityday (n=133)","Top Word of Day: harvey (n=76)","Top Word of Day: harvey (n=164)","Top Word of Day: harvey (n=120)","Top Word of Day: tax (n=140)","Top Word of Day: defenddaca (n=192)","Top Word of Day: harvey (n=59)","Top Word of Day: harvey (n=29)","Top Word of Day: harvey (n=53)","Top Word of Day: laborday (n=211)","Top Word of Day: daca (n=506)","Top Word of Day: dreamers (n=200)","Top Word of Day: hurricaneirma (n=110)","Top Word of Day: hurricaneirma (n=154)","Top Word of Day: hurricaneirma (n=98)","Top Word of Day: hurricaneirma (n=95)","Top Word of Day: neverforget (n=356)","Top Word of Day: care (n=94)","Top Word of Day: tax (n=120)","Top Word of Day: bill (n=121)","Top Word of Day: powmiarecognitionday (n=107)","Top Word of Day: day (n=28)","Top Word of Day: constitutionday (n=61)","Top Word of Day: happy (n=145)","Top Word of Day: grahamcassidy (n=262)","Top Word of Day: grahamcassidy (n=274)","Top Word of Day: grahamcassidy (n=166)","Top Word of Day: grahamcassidy (n=206)","Top Word of Day: grahamcassidy (n=44)","Top Word of Day: grahamcassidy (n=58)","Top Word of Day: grahamcassidy (n=241)","Top Word of Day: care (n=153)","Top Word of Day: tax (n=375)","Top Word of Day: stevescalise (n=232)","Top Word of Day: tax (n=110)","Top Word of Day: puerto (n=58)","Top Word of Day: americans (n=30)","Top Word of Day: vegas (n=492)","Top Word of Day: act (n=156)","Top Word of Day: health (n=156)","Top Word of Day: budget (n=155)","Top Word of Day: women (n=193)","Top Word of Day: tax (n=26)","Top Word of Day: day (n=29)","Top Word of Day: trump (n=51)","Top Word of Day: health (n=148)","Top Word of Day: tax (n=242)","Top Word of Day: americans (n=138)","Top Word of Day: health (n=151)","Top Word of Day: iran (n=17)","Top Word of Day: tax (n=16)","Top Word of Day: tax (n=73)","Top Word of Day: tax (n=84)","Top Word of Day: tax (n=88)","Top Word of Day: tax (n=118)","Top Word of Day: tax (n=125)","Top Word of Day: tax (n=29)","Top Word of Day: tax (n=19)","Top Word of Day: tax (n=77)","Top Word of Day: tax (n=156)","Top Word of Day: tax (n=169)","Top Word of Day: tax (n=307)","Top Word of Day: tax (n=66)","Top Word of Day: day (n=50)","Top Word of Day: tax (n=27)","Top Word of Day: tax (n=75)","Top Word of Day: tomorrow (n=149)","Top Word of Day: tax (n=136)","Top Word of Day: tax (n=657)","Top Word of Day: tax (n=267)","Top Word of Day: tax (n=72)","Top Word of Day: sutherland (n=98)","Top Word of Day: tax (n=248)","Top Word of Day: tax (n=345)","Top Word of Day: tax (n=307)","Top Word of Day: tax (n=343)","Top Word of Day: veterans (n=264)","Top Word of Day: veterans (n=546)","Top Word of Day: veterans (n=95)","Top Word of Day: tax (n=212)","Top Word of Day: tax (n=401)","Top Word of Day: tax (n=441)","Top Word of Day: tax (n=902)","Top Word of Day: tax (n=244)","Top Word of Day: tax (n=56)","Top Word of Day: tax (n=43)","Top Word of Day: transgender (n=94)","Top Word of Day: internet (n=159)","Top Word of Day: thanksgiving (n=99)","Top Word of Day: thanksgiving (n=376)","Top Word of Day: thanksgiving (n=33)","Top Word of Day: businesses (n=177)","Top Word of Day: tax (n=28)","Top Word of Day: tax (n=151)","Top Word of Day: tax (n=268)","Top Word of Day: tax (n=335)","Top Word of Day: tax (n=365)","Top Word of Day: tax (n=346)","Top Word of Day: tax (n=331)","Top Word of Day: tax (n=55)","Top Word of Day: tax (n=150)","Top Word of Day: tax (n=236)","Top Word of Day: house (n=171)","Top Word of Day: remember (n=181)","Top Word of Day: tax (n=94)","Top Word of Day: tax (n=35)","Top Word of Day: rights (n=27)","Top Word of Day: tax (n=107)","Top Word of Day: bill (n=158)","Top Word of Day: tax (n=271)","Top Word of Day: netneutrality (n=265)","Top Word of Day: health (n=168)","Top Word of Day: tax (n=110)","Top Word of Day: tax (n=34)","Top Word of Day: tax (n=318)","Top Word of Day: tax (n=1024)","Top Word of Day: tax (n=648)","Top Word of Day: tax (n=220)","Top Word of Day: tax (n=211)","Top Word of Day: tax (n=79)","Top Word of Day: christmas (n=93)","Top Word of Day: christmas (n=300)","Top Word of Day: tax (n=52)","Top Word of Day: tax (n=53)","Top Word of Day: tax (n=45)","Top Word of Day: tax (n=53)","Top Word of Day: tax (n=47)","Top Word of Day: 2017 (n=59)","Top Word of Day: happy (n=235)","Top Word of Day: people (n=74)","Top Word of Day: people (n=93)","Top Word of Day: trump (n=112)","Top Word of Day: trump (n=84)","Top Word of Day: tax (n=31)","Top Word of Day: health (n=20)","Top Word of Day: tps (n=110)","Top Word of Day: law (n=198)","Top Word of Day: congress (n=151)","Top Word of Day: americans (n=132)","Top Word of Day: president (n=139)","Top Word of Day: tax (n=56)","Top Word of Day: community (n=27)","Top Word of Day: dr (n=458)","Top Word of Day: people (n=82)","Top Word of Day: house (n=125)","Top Word of Day: government (n=156)","Top Word of Day: government (n=519)","Top Word of Day: government (n=714)","Top Word of Day: government (n=200)","Top Word of Day: government (n=389)","Top Word of Day: health (n=117)","Top Word of Day: people (n=111)","Top Word of Day: tax (n=84)","Top Word of Day: health (n=97)","Top Word of Day: holocaust (n=115)","Top Word of Day: day (n=27)","Top Word of Day: sotu (n=96)","Top Word of Day: sotu (n=429)","Top Word of Day: sotu (n=1699)","Top Word of Day: tax (n=109)","Top Word of Day: memo (n=254)","Top Word of Day: tax (n=31)","Top Word of Day: superbowl (n=33)","Top Word of Day: family (n=145)","Top Word of Day: health (n=150)","Top Word of Day: house (n=137)","Top Word of Day: budget (n=87)","Top Word of Day: budget (n=281)","Top Word of Day: memo (n=51)","Top Word of Day: tax (n=18)","Top Word of Day: infrastructure (n=200)","Top Word of Day: budget (n=119)","Top Word of Day: families (n=215)","Top Word of Day: gun (n=174)","Top Word of Day: gun (n=103)","Top Word of Day: congress (n=39)","Top Word of Day: gun (n=25)","Top Word of Day: happy (n=85)","Top Word of Day: students (n=93)","Top Word of Day: graham (n=155)","Top Word of Day: gun (n=247)","Top Word of Day: gun (n=89)","Top Word of Day: people (n=35)","Top Word of Day: gun (n=31)","Top Word of Day: congress (n=88)","Top Word of Day: netneutrality (n=232)","Top Word of Day: graham (n=164)","Top Word of Day: tax (n=109)","Top Word of Day: students (n=75)","Top Word of Day: day (n=28)","Top Word of Day: im (n=21)","Top Word of Day: dreamers (n=164)","Top Word of Day: im (n=119)","Top Word of Day: bill (n=127)","Top Word of Day: women (n=463)","Top Word of Day: jobs (n=100)","Top Word of Day: veterans (n=36)","Top Word of Day: care (n=24)","Top Word of Day: students (n=103)","Top Word of Day: house (n=117)","Top Word of Day: students (n=510)","Top Word of Day: health (n=128)","Top Word of Day: louise (n=204)","Top Word of Day: happy (n=109)","Top Word of Day: mueller (n=33)"],"mode":"lines","type":"scatter","line":{"fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
<p>There is a very clear seasonality within the week, with politicians tweets peaking Tuesday - Thursday and troughing on weekends.</p>
<pre class="r"><code>twitter_history %&gt;%
  mutate(dayofweek = weekdays(date),
         dayofweek = factor(dayofweek, levels = c(&quot;Sunday&quot;, &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;))) %&gt;%
  group_by(dayofweek) %&gt;%
  summarise(tweets = n()) %&gt;%
  ggplot(aes(x = dayofweek, y = tweets)) +
  geom_bar(stat = &#39;identity&#39;, fill = &#39;#1f77b4&#39;)</code></pre>
<p><img src="/post/2018-03-29-dataset-introduction-us-politician-tweets_files/figure-html/plot_tweet_volume_over_weekdays-1.png" width="672" /></p>
<p>Looking at the top words used by politicians in 2017, not only has healthcare dominated the conversation, but the terms ‘Trumpcare’ is successfully dominating any other terms (AHCA, Obamacare, etc), a renovation in branding that put healthcare legislation ‘problems’ squarely on Republican shoulders. Also of interest is the elevation of ‘women’ and ‘veterans’ as interest groups on par with a typically popular subject like ‘jobs’. 2018 is interesting in that the conversaion is less focused on trump an more on Congress. We also see a jump in the mentions of ‘students’, likely in reference to the Parkland students pushing for gun control reform.</p>
<pre class="r"><code>get_top_words &lt;- function(twitter_history) {
  toptext_1 &lt;- create_tidy_text(twitter_history)
  
  top_words &lt;- toptext_1 %&gt;%
    count(word)
  
  return(top_words)
}

top_words_2017 &lt;- get_top_words(twitter_history %&gt;% dplyr::filter(year(date) == 2017))
top_words_2018 &lt;- get_top_words(twitter_history %&gt;% dplyr::filter(year(date) == 2018))
rpal2 &lt;- brewer.pal(8,&quot;Dark2&quot;)
cat(&quot;2017&quot;)</code></pre>
<pre><code>## 2017</code></pre>
<pre class="r"><code>wordcloud(top_words_2017$word, top_words_2017$n, max.words = 200, random.order = FALSE, color = rpal2, scale = c(2, .25))</code></pre>
<p><img src="/post/2018-03-29-dataset-introduction-us-politician-tweets_files/figure-html/total_wordcloud-1.png" width="672" /></p>
<pre class="r"><code>cat(&quot;2018&quot;)</code></pre>
<pre><code>## 2018</code></pre>
<pre class="r"><code>wordcloud(top_words_2018$word, top_words_2018$n, max.words = 200, random.order = FALSE, color = rpal2, scale = c(2, .25))</code></pre>
<p><img src="/post/2018-03-29-dataset-introduction-us-politician-tweets_files/figure-html/total_wordcloud-2.png" width="672" /></p>
<p>These words give us an idea over what choices elected officials are making over driving and framing national conversations, but more illuminating would be getting a sense of the tone of the conversations. Expanding on our time series analysis, we map out the proportion of different emotions of all the tweets on each day. Notably, there are spikes in anger and fear on those days where we’ve seen tragic events unfold (Charlotesville, Las Vegas). Joy spikes immensely on holidays (Happy Christmas! and such).</p>
<pre class="r"><code>get_sentiment_scores_over_time &lt;- function(twitter_history) {
  tidy_tweets &lt;- create_tidy_text(twitter_history)
  emotion_time &lt;- tidy_tweets %&gt;%
    inner_join(get_sentiments(&quot;nrc&quot;)) %&gt;%
    group_by(date, sentiment) %&gt;%
    summarise(n = n()) %&gt;%
    mutate(perc=n/sum(n))
  
  return(emotion_time)
}

emotion_time &lt;- get_sentiment_scores_over_time(twitter_history)
emotion_time$sentiment &lt;- factor(emotion_time$sentiment, levels = c(&quot;negative&quot;, &quot;disgust&quot;, &quot;anger&quot;, &quot;sadness&quot;, &quot;fear&quot;, &quot;surprise&quot;, &quot;anticipation&quot;, &quot;trust&quot;, &quot;joy&quot;, &quot;positive&quot;))
ggplot(data = emotion_time, aes(x = date, y = perc, col = sentiment)) +
  geom_line() +
  facet_wrap(~sentiment, ncol = 3) +
  scale_color_manual(values = colorRampPalette(brewer.pal(10, &quot;Set1&quot;))(10)) +
  scale_x_date(date_breaks = &quot;1 month&quot;, 
               date_labels = &quot;%b-%y&quot;,
               expand = c(0,0)) +
  scale_y_continuous(expand = c(0,0),
                     labels = scales::percent) +
  theme(axis.text.x = element_text(angle = 45, vjust = .5))</code></pre>
<p><img src="/post/2018-03-29-dataset-introduction-us-politician-tweets_files/figure-html/sentiment_time-1.png" width="1152" /></p>
</div>
<div id="other-investigations" class="section level2">
<h2>Other Investigations</h2>
<p><em>If you use this data for your own analysis, tweet me <span class="citation">@bmo_molin</span> or email me at <a href="mailto:brendan.molin@gmail.com">brendan.molin@gmail.com</a>; I’ll add a link to it here and help broadcast it</em></p>
</div>
